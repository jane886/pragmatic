搜索引擎核心就是 倒排索引
词找文 

分词要剔除无意义的词 要改写输入
检索的时候要找词和文章的关系 然后打分 排序


搜索引擎如果想支持模糊查询 
需要单独训练做词的分类

所以这种搜索引擎你写出来会发现和 百度这种天差地别

搜索引擎 es 一家独大
es主要好在整套打包方案
存储啥的都做好了

自己写的话 可以用 lucene 从底层写
再底层就是自己实现算法

正排就是  id 找 数据

倒排就是 数据 找 id

比如 es索引压缩是怎么做的

倒排 就是 一个词 后面跟个 列表，列表元素是文档的索引


搜索有两个大的用途
1. 异构查询
2. 搜索业务

    异构查询就是上面说的，大宽表啥的
    你数据库索引肯定不能随便改索引
    或者说你数据库是多个表，你用 搜索引擎可以聚合成一个大宽表
    这就是数据上的异构了

    嗯 还有物理上的异构，比如doris，可以帮你底层查MySQL 和 es，然后上层帮你聚合好
    也是一种存储引擎，但底层有一个方案可以帮你接入不同存储引擎的表
    比如我可以直接在业务层查MySQL join es，他作为中间层发送查询计划到底层，然后上层处理好给我
    抽象查询层呗，支持一部分的下推，下推是说索引下推吧
    是指 sql 下推到 es的时候
    这个抽象的查询层支持部分查询条件直接下推到es的对应api来加速查询
    应该是叫谓词下推
        业务不感知 es
        正常写sql
        sql下去 parse出来能用 es 就用 es查

        业务层屏蔽对 es 的感知
        走统一的查询抽象层
    业务都使用sql查doris表，不关系底层是es还是mysql，如果是es
    中间层帮你处理好

    搜索业务就复杂了
    简单理解就是 存两份
    做好 增量 和 全量 的同步
    需要一整套的解决方案

    你看小红书 百度 美团的搜索 功能都很丰富的，这个背后是有很多事情要做的
    首先输入要支持 输入改写
    这个叫做 queryRewrite
    修正用户输入

    其次你要做一些业务拦截识别啥的
    queryFilter 
    比如你输入一个站内链接就帮你自动跳转
    这个肯定不是用倒排索引给你查出来的

    还有就是查询结果也要改写 合并之类的，插点广告啥的

    淘宝的评价主查询都是基于搜索做的

    es同步有延迟，毫秒级吧
    应该有 api，一般就是 binlog 接消息往里面写


这个东西我觉得能学的有几个
1. 整套搭建的解决方案
2. 掌握部分原理面试可用


搜索可能没有太多的对比方案。。
es一家独大
业务上有需要 有一些开发工作
或者怎么基于 es 上开发
还有一个小型的搜索引擎，用的人好像不多，meilisearch，经典rust系列
可以调研一下他和 es 的差别。。